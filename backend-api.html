---
layout: default
title: "UserFrosting: Backend API"
---
  <div class='alert alert-warning'>This page is still under construction.</div>  
<h1>Backend API</h1>

<p class="lead">
These are pages which accept a POST or GET request, perform some action, and then return a response in the form of a JSON object.  All backend api pages are stored in the <code>api</code> directory.  Success, error, and warning messages are sent to the <a href="features.html#errors">alert stream</a>, and can be accessed via <code>api/user_alerts.php</code>.
</p>

<div class="panel-group" id="api_pages">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#api_pages" href="#activate_account">
          activate_account.php
        </a>
      </h4>
    </div>
    <div id="activate_account" class="panel-collapse collapse in">
      <div class="panel-body">
        <p class="lead">
        Activates a newly registered user account, using the activation token that was emailed to the user upon account registration or user's <code>user_id</code> (`id` column in <code>users</code>).
        </p>
        <p><strong>Login required: </strong>no</p>
        <p><strong>GET request</strong></p>
        <table class="table table-bordered">
        <thead><td>Variable name</td><td>Description</td></thead>
        <tbody>
        <tr><td><code>[token]</code></td><td>The user's activation token, as generated during account registration or after a resend activation request.</td></tr>
        <tr><td><code>[user_id]</code></td><td>The user's id.  Used for admins to bypass the activation token and directly activate a user's account.</td></tr>
        <tr><td><code>ajaxMode</code></td><td>Set to <strong>true</strong> if the request is via ajax, <strong>false</strong> otherwise.</td></tr>
        </tbody>
        </table>
        <p><strong>GET response</strong></p>
        <table class="table table-bordered">
        <thead><td>Variable name</td><td>Description</td></thead>
        <tbody>
        <tr><td><code>errors[]</code></td><td>the number of errors generated by the request.</td></tr>
        <tr><td><code>successes[]</code></td><td>the number of successes generated by the request.</td></tr>
        </tbody>
        </table>    
        <p><strong>Possible alerts generated</strong></p>
        <ul class="list-group">
            <li class="list-group-item"><code>ACCOUNT_INVALID_USER_ID</code> : Invalid user_id specified.</li>
            <li class="list-group-item"><code>ACCOUNT_TOKEN_NOT_FOUND</code> : Invalid token specified.</li>
            <li class="list-group-item"><code>SQL_ERROR</code> : Database error.</li>
            <li class="list-group-item"><code>ACCOUNT_ACTIVATION_COMPLETE</code> : Account successfully activated.</li>
            <li class="list-group-item"><code>ACCOUNT_MANUALLY_ACTIVATED</code> : Manual account activation successful.</li>
            <li class="list-group-item">Authorization failed</li>            
        </ul>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#api_pages" href="#create_action_permit">
          create_action_permit.php
        </a>
      </h4>
    </div>
    <div id="create_action_permit" class="panel-collapse collapse">
      <div class="panel-body">
        <p class="lead">
        Adds a new <a href="features.html#authorization">action-permit mapping</a> for a user or group.
        </p>
        <p><strong>Login required: </strong>yes</p>
        <p><strong>POST request</strong></p>
        <table class="table table-bordered">
        <thead><td>Variable name</td><td>Description</td></thead>
        <tbody>
        <tr><td><code>action_name</code></td><td>The name of the secure action to be added for the specified user/group.</td></tr>
        <tr><td><code>permit</code></td><td>A string of permit validators, joined by <code>&</code>.</td></tr>
        <tr><td><code>[group_id]</code></td><td>If specified, the action-permit mapping will be added for this group.</td></tr>
        <tr><td><code>[user_id]</code></td><td>If specified, the action-permit mapping will be added for this user.</td></tr>
        <tr><td><code>ajaxMode</code></td><td>Set to <strong>true</strong> if the request is via ajax, <strong>false</strong> otherwise.</td></tr>
        </tbody>
        </table>
        <p><strong>POST response</strong></p>
        <table class="table table-bordered">
        <thead><td>Variable name</td><td>Description</td></thead>
        <tbody>
        <tr><td><code>errors[]</code></td><td>the number of errors generated by the request.</td></tr>
        <tr><td><code>successes[]</code></td><td>the number of successes generated by the request.</td></tr>
        </tbody>
        </table>    
        <p><strong>Possible alerts generated</strong></p>
        <ul class="list-group">
            <li class="list-group-item">Invalid user_id specified.</li>
            <li class="list-group-item">Invalid token specified.</li>
            <li class="list-group-item"><code>SQL_ERROR</code> : Database error.</li>
            <li class="list-group-item">Invalid action specified.</li>
            <li class="list-group-item">Invalid permit(s) specified.</li>
            <li class="list-group-item">Authorization failed</li>            
        </ul>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#api_pages" href="#create_group">
          create_group.php
        </a>
      </h4>
    </div>
    <div id="create_group" class="panel-collapse collapse">
      <div class="panel-body">
        <p class="lead">
        Create a new <a href="components.html#groups">group</a>.
        </p>
        <p><strong>Login required: </strong>yes</p>
        <p><strong>POST request</strong></p>
        <table class="table table-bordered">
        <thead><td>Variable name</td><td>Description</td></thead>
        <tbody>
        <tr><td><code>group_name</code></td><td>The name of the new group.</td></tr>
        <tr><td><code>home_page_id</code></td><td>The id of the page (as specified in the <code>pages</code> database table) to use as the group's home page.</td></tr>
        <tr><td><code>ajaxMode</code></td><td>Set to <strong>true</strong> if the request is via ajax, <strong>false</strong> otherwise.</td></tr>
        </tbody>
        </table>
        <p><strong>POST response</strong></p>
        <table class="table table-bordered">
        <thead><td>Variable name</td><td>Description</td></thead>
        <tbody>
        <tr><td><code>errors[]</code></td><td>the number of errors generated by the request.</td></tr>
        <tr><td><code>successes[]</code></td><td>the number of successes generated by the request.</td></tr>
        </tbody>
        </table>    
        <p><strong>Possible alerts generated</strong></p>
        <ul class="list-group">
            <li class="list-group-item"><code>PERMISSION_NAME_IN_USE</code> : Group name already in use.
            <li class="list-group-item"><code>PERMISSION_CHAR_LIMIT</code> : Group name too short/long.
            <li class="list-group-item"><code>PERMISSION_CREATION_SUCCESSFUL</code> : Group successfully created.
            <li class="list-group-item"><code>SQL_ERROR</code> : Database error.</li>
            <li class="list-group-item">Authorization failed</li>
        </ul>
      </div>
    </div>
  </div>
</div>
