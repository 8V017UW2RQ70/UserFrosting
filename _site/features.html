<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <title>UserFrosting: Features</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="">
    <link rel="canonical" href="//features.html">
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="//css/main.css">
    
   <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-custom.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <link rel="canonical" href="http://www.userfrosting.com">

    <title>UserFrosting: A secure, modern user management system based on UserCake, jQuery, and Bootstrap</title>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
        ga('create', 'UA-37689257-2', 'www.userfrosting.com');
        ga('send', 'pageview');
      
    </script>
</head>


    <body>

    <header role="banner" class="navbar navbar-default navbar-fixed-top top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" data-toggle="collapse" data-target="#collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">UserFrosting</a>
    </div>
    <nav id="collapse" role="navigation" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown dropdown-primary">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class='fa fa-download'></i> Get UserFrosting <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="https://github.com/alexweissman/UserFrosting/"><i class='fa fa-github'></i> View on Github</a></li>
            <li class="divider"></li>              
            <li><a href="https://github.com/alexweissman/UserFrosting/zipball/master"><i class='fa fa-file-archive-o'></i> Download as a .zip file</a></li>
            <li><a href="https://github.com/alexweissman/UserFrosting/tarball/master"><i class='fa fa-file-archive-o'></i> Download as a tar.gz file</a></li>
          </ul>
        </li>
        <li><a href="http://opensourcecoin.org/aweissman/">Demo</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="about.html">About</a></li>
            <li><a href="components.html">Components</a></li>
            <li><a href="features.html">Main Features</a></li>
            <li><a href="security.html">Security Features</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
          <ul class="dropdown-menu">        
            <li><a href="tutorials.html">Tutorials and Help</a></li>
            <li><a href="backend-api.html">Backend AJAX API</a></li>
            <li><a href="forms-api.html">Forms API</a></li>
          </ul>
        </li>
        <li><a href="contributors.html">Contributors</a></li>
        </ul>
      <ul class="nav navbar-nav navbar-right">  
        <li style="padding-top: 10px;"><iframe src="http://ghbtns.com/github-btn.html?user=alexweissman&repo=userfrosting&type=watch&count=true&size=large" frameborder="0" scrolling="0" width="144" height="30"></iframe></li>
      </ul>
      
    </nav>
  </div>
</header> 


    <div class="container">
      <h1 id="toc_0">Main Features</h1>

<div class="header-menu">
  <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="#api">Backend API</a></li>
          <li><a href="#validation">Input Validation</a></li>
          <li><a href="#errors">Error Handling</a></li>
          <li><a href="#authentication">Authentication</a></li>
          <li><a href="#authorization">Authorization</a></li>          
          <li><a href="#user-management">User Management</a></li>
          <li><a href="#templating">Templating</a></li>
          </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</div>

<h2 id="toc_1"><a name="api"></a><i class='fa fa-road'></i> Backend API</h2>
<div class="alert alert-info">Full documentation for the backend api pages is available <a href="backend-api.html">here.</a></div>
<p>Although UserFrosting does not follow a strict Model-View-Controller (MVC) architecture, it respects the principle of clean separation between data, logic, and presentation.  The main boundary in UserFrosting&#39;s codebase is between the frontend of the website, which consists of static HTML, Javascript (using jQuery and Bootstrap), and CSS styles, and the backend, which consists of the MySQL database and the PHP code which interacts with the database and executes the logic.</p>

<p>The content which users see is generated by the pages located in the <code>account</code> subdirectory.  They consist largely of static HTML, as well as calls to various Javascript functions.  Javascript is located in the <code>js</code> subdirectory, and is used for fetching and submitting data to the backend, as well as creating dynamic effects for the frontend content.  To communicate with the backend, these functions use AJAX (Asynchronous Javascript and XML), as implemented by the jQuery framework.  AJAX calls are made to a set of <strong>API</strong> pages, which are located in the <code>api</code> subdirectory.  These pages accept <code>POST</code> requests for creating, updating, and deleting data, and <code>GET</code> requests for fetching data.  Data fetched by <code>GET</code> is returned as a JSON object, which the Javascript functions then parse and render on the frontend pages.
</p>

<div class="row">
<div class="col-md-6">

<h2 id="toc_2"><a name="validation"></a><i class='fa fa-check'></i> Input Validation</h2>

<p>For security and user experience, data submitted by the user must be validated.  For example, we might require that passwords be a certain minimum length, or that email addresses contain the <code>@</code> symbol.  Data is validated in two places: on the frontend, so that users can find out why their input is invalid without waiting for a page to reload, and on the backend, so that malicious users cannot bypass the frontend validation to submit potentially <strong>destructive data</strong> (for more information on destructive data, see the <a href="security.html">Security</a> section).</p>

<p>On the frontend, validation is done via the <code>validateFormFields</code> function, located in <code>js/userfrosting.js</code>.  When this function is called on a form, it checks all submitted values against their validation rules.  These rules are specified by the <code>data-validate</code> attribute for the given field.  For example,</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">&lt;input type=&#39;text&#39; class=&#39;form-control&#39; name=&#39;user_title&#39; autocomplete=&#39;off&#39; data-validate=&#39;{\&quot;minLength\&quot;: 1, \&quot;maxLength\&quot;: 100, \&quot;label\&quot;: \&quot;Title\&quot; }/&gt;
</code></pre></div>
<p>tells us that the field <code>user_title</code> must be at least 1 character and at most 100 characters long.  If the form values pass frontend validation, they are submitted to the appropriate backend API page.  On the backend, values are rechecked with the corresponding server-side rules, and potentially destructive data is neutralized using PHP&#39;s <code>htmlentities</code>.  If they fail validation on the backend, an error is pushed to the <strong>alert stream</strong> and an error code is returned to the frontend.</p>
</div>
<div class="col-md-6">
<p><img class="img-right" src="images/features-validation.png"></p>
</div>
</div>

<h2 id="toc_3"><a name="errors"></a><i class='fa fa-exclamation'></i> Error Handling</h2>

<p>Errors can occur at any point in the software, from the database all the way up to the frontend.  These errors can include runtime PHP errors, database errors, invalid data errors, or server errors.  Some errors, such as those raised by validating data, should be conveyed to the frontend user.  Others, however, should not be conveyed for security reasons, or should be &quot;genericized&quot; to explain that there was an error but without giving any details.  For example, you would not want users to know the details about a bug in your PHP code which they could potentially exploit, but you do want to let them know that something went wrong.</p>

<p>UserFrosting communicates information about errors (and exceptions, which are converted to errors) through the <strong>alert stream</strong>.  This is simply a PHP <code>SESSION</code> variable, which contains of an array of error messages.  It also contains an array of &quot;success&quot; messages, for when you want to let a user know that an action was completed successfully.  Backend functions can directly add messages to the alert stream through the PHP <code>addAlert</code> function, located in <code>models/funcs.php</code>.  These messages can then be accessed through the API page <code>user_alerts.php</code>, and rendered as necessary on frontend pages.  Frontend pages can also add messages to the alert stream by POSTing to <code>user_alerts.php</code>.  Once messages have been fetched from the stream, they are removed.</p>

<p>Other API pages return an error code, rather than the messages themselves.  This is because you may want to reload a page before displaying a message, and thus the alert stream allows messages to persist between page reloads.  For example if you create a new user, you may want to reload the list of users and then display a &quot;user successfully created&quot; message.</p>

<h2 id="toc_4"><a name="authentication"></a><i class='fa fa-key'></i> Authentication</h2>

<p><a href="components.html#users">Users</a> of your site <strong>authenticate</strong> (&quot;log in&quot;) with a unique username and a password.  Passwords are hashed via the <a href="https://en.wikipedia.org/wiki/Bcrypt">bcrypt</a> algorithm before being stored in the database.  Since hashing is a one-way function, this provides an essential security feature in the event that your database is compromised.  If an attacker managed to gain access to your database, they&#39;ll have a much harder time recovering your users&#39; passwords from the hashes.  UserFrosting also appends a 22-character pseudo-random salt to user passwords, which makes it harder for attackers to reverse engineer passwords based on known hashes.  For more information, see the &quot;Security&quot; section.</p>

<p>UserFrosting can also be configured to allow logging in with the user&#39;s email address instead of their username.  This makes it a little easier for your users, since they don&#39;t have to remember an additional piece of information.  However email addresses are by definition public pieces of information, making them slightly less secure than a username, which could be kept secret.  This is a tradeoff you must consider based on the purpose and target audience of your site.</p>

<p>UserFrosting provides a password recovery mechanism in the event that a user forgets their password.  After specifying their username and email address, a user will be emailed a one-time password reset token that allows them to choose a new password.  Reset tokens expire after a certain period of time.  The default is 3 hours, but this can be changed in &quot;site settings.&quot;</p>

<h2 id="toc_5"><a name="authorization"></a><i class='fa fa-ticket'></i> Authorization</h2>

<img class="img-right" src="images/demo-action-auth.png">
<p>Once logged in, different users can be given permission to access different resources (such as pages) and perform different actions.  For example, you might want to allow a customer the ability to change their avatar image or password, but not their current balance.  Or, you might want to allow one user to send a message to another user, but only if they belong to the same <a href="components.html#groups">group</a>.  This is known as authorization.</p>

<p>The most common way that authorization is implemented is through an ACL (**access control list**).  In this scheme, every object (files, database entries, etc) in your system is stored along with a list of users and the actions they may perform on that object.  For example, an ACL entry might say that user Alice has permission to read and update other users&#39; information.  If you wanted to limit Alice&#39;s access only to certain profiles, you&#39;d need a separate entry in the ACL for each user she can access (&quot;Alice can read and update Bob&#39;s profile information&quot;, &quot;Alice can read and update Carlos&#39; profile information&quot;, etc).  </p>

<p>In practice, systems of even moderate complexity end up requiring long, unwieldy ACLs.  For example, every time a new user account is added, you would have to add a new entry to every administrator&#39;s ACL in order for the new account to be managed by admins.  Furthermore, it is difficult to create context-dependent access control.  For example, you might want to allow certain users to download an mp3, but only on Mondays and Fridays.  Or, you might want to allow any user with a certain number of posts on a forum to create special announcements.  This would be difficult to implement with an ACL.</p>

<p><strong>Rule-based access control</strong> solves this problem by saying that a particular user can access a particular resource, subject to certain rules.  This provides more flexibility by allowing any computable procedure to be used as a rule, rather than a simple lookup.  However, this also means that site managers must have programming expertise and access to the codebase.  The code must then be changed whenever a change in authorization rules is required.</p>

<p>UserFrosting attempts to combine the power of rule-based access with the simplicity of ACLs through its <strong>secure function</strong> feature.  Secure functions control user access in terms of the actions they can perform on a given resource/object.  These actions include the typical &quot;create-read-update-delete&quot; functions, but can also be extended to other types of actions, like disabling a user account, or linking a user to a group.  Individual users, as well as entire groups, can be granted permission to perform certain actions based on certain rules.  Rules are implemented in PHP as functions that return a boolean (yes/no) value given some parameters and global attributes of the currently logged in user.  For example, <code>isLoggedInUser(user_id)</code> checks to see whether the supplied <code>user_id</code> matches the <code>user_id</code> of the currently logged in user.  These functions are called <strong>permit validators</strong>, and a small set of predefined permit validators are provided in <code>models/authorization.php</code> as member functions of the <code>PermissionValidator</code> class.</p>

<p>Actions are also implemented as PHP functions, and can be found in <code>models/secure_functions.php</code>.  The relationships between users (or groups), secure actions, and permits are defined in the <code>user_action_permit</code> and <code>group_action_permit</code> tables.  Each row in these tables contains a <code>user_id</code> (or <code>group_id</code>), the function name for a secure action (e.g. <code>deleteUser</code>), and a string of permit function names joined by <code>&amp;</code>.  When a secure action is called, it determines whether the user is permitted to perform that action with the specified parameters.  It does this via the <code>checkPermissionSelf</code> function, found in <code>models/authorization.php</code>.  This function checks the <code>*_action_permit</code> tables for rows that match the action name and the user&#39;s <code>user_id</code>, as well as any rows that match the <code>group_id</code> of a group to which the user belongs.  For each row found, it runs the specified permit functions, matching the parameters supplied to the secure action with the parameter names in the permit functions.  For example, there might be a row that looks like:</p>

<table class="table table-bordered">
<thead><td>id</td><td>group_id</td><td>action</td><td>permits</td></thead>
<tbody>
<tr>
<td>9</td>
<td>4</td>
<td>updateUser</td>
<td>isUserPrimaryGroup(user_id,'3')&isLoggedInUserInGroup('3')</td>
</tbody>
</table>

<p>This tells us that users in group <code>4</code> can only perform the action <code>updateUser</code> if the <code>user_id</code> of the user they wish to update has a primary group with <code>group_id=3</code>, and they are also a member of group <code>3</code>.  If multiple rows are matched, only one row needs to succeed to permit access.  Thus, joining permits via <code>&amp;</code> within a row serves as an AND operation, while having multiple rows for the same user (or group) and action serves as an OR operation.</p>

<p>The root user automatically has permission for all actions in all contexts.</p>

<p>For your convenience, UserFrosting provides a simple interface for managing user and group-level authorization.  This can be found under &quot;Site Settings -&gt; Authorization&quot; in the admin menu.  We provide shortcuts for some common permission settings (&quot;always&quot;, &quot;isLoggedInUser&quot;, &quot;isUserPrimaryGroup&quot;, etc) which are automatically converted to the appropriate permit string.  UserFrosting also comes preloaded with typical permission settings for the &quot;Admin&quot; and &quot;User&quot; groups.  You can also write your own custom permit strings and add them to the database manually.</p>

<p>The default secure actions that come with UserFrosting are contained in <code>models/secure_functions.php</code>, and consist of the following:</p>

<ul>
<li>activateUser</li>
<li>addUserToGroup</li>
<li>createGroup</li>
<li>createGroupActionPermit</li>
<li>createUser</li>
<li>createUserActionPermit</li>
<li>deleteGroup</li>
<li>deleteGroupActionPermit</li>
<li>deleteUser</li>
<li>deleteUserActionPermit</li>
<li>loadGroup</li>
<li>loadGroupActionPermits</li>
<li>loadGroups</li>
<li>loadPermissionValidators</li>
<li>loadPresetPermitOptions</li>
<li>loadSecureFunctions</li>
<li>loadSitePages</li>
<li>loadSiteSettings</li>
<li>loadUser</li>
<li>loadUserActionPermits</li>
<li>loadUserGroups</li>
<li>loadUsers</li>
<li>loadUsersInGroup</li>
<li>removeUserFromGroup</li>
<li>updateGroup</li>
<li>updateGroupActionPermit</li>
<li>updatePageGroupLink</li>
<li>updateSiteSettings</li>
<li>updateUserActionPermit</li>
<li>updateUserDisplayName</li>
<li>updateUserEmail</li>
<li>updateUserEnabled</li>
<li>updateUserPassword</li>
<li>updateUserPrimaryGroup</li>
<li>updateUserTitle</li>
</ul>

<p>The default permit validators are contained in <code>models/authorization.php</code>, and consist of the following:</p>

<ul>
<li>always()</li>
<li>isLoggedInUser(user_id)</li>
<li>isLoggedInUserInGroup(group_id)</li>
<li>isUserPrimaryGroup(user_id, group_id)</li>
<li>isSameGroup(group_id, group_id_2)</li>
<li>isDefaultGroup(group_id)</li>
<li>isActive(user_id)</li>
</ul>

<p>You may of course add additional secure actions and permit validators - and will probably need to if you want to control access to the other features you create for your site.</p>

<h2 id="toc_6"><a name="user-management"></a><i class='fa fa-users'></i> User Management</h2>

<p>UserFrosting provides a robust, intuitive interface for administrators to manage user accounts.  From the "users" page, admins can create new user accounts, edit existing user account information, activate, disable, and delete accounts.  Users can also be assigned/removed from different groups, and the user primary group can be set.</p>
<p>Upcoming features include pagination of the user list, and searching for users by name or other criteria.</p>
<img src="images/demo-user-management.png">

<h2 id="toc_7"><a name="templating"></a><i class='fa fa-puzzle-piece'></i> Templating</h2>

<div class="alert alert-info">Coming soon!</div>

<p>Individual user experience can be customized through the use of UserFrosting's various templated features.</p>


                <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>&copy; Created by <a href="https://github.com/alexweissman" target="_blank">Alexander Weissman</a> Licensed under the
        <a href="http://opensource.org/licenses/MIT" target="_blank">MIT License</a></p>
      </footer>
      
    </div>
        <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="jquery/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    </body>
</html>